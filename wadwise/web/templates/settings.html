{% extends 'base.html' %}
{% from 'widgets.html' import select_group %}

{% block content %}
<style>
    form-aligned {
        align-items: center;
    }
</style>

<div>
    <a href="{{ url_for('account_view') }}">Back</a>
    | <a href="{{ url_for('account_edit') }}">Add subaccount</a>
    | <a href="{{ url_for('import_data') }}">Import data</a>
</div>

<v-stack class="gap-s">
    <form method="POST" action="./favs" data-preact="FavsForm" class="pure-form"></form>

    <form method="POST" action="./joint-accounts" data-preact="JointForm" class="pure-form"></form>

    <form method="POST" action="./cur-list" class="pure-form wait-preact">
        <fieldset>
            <legend>Currencies</legend>
            <v-stack>
                <textarea name="cur_list" rows="{{ ((cur_list | length) + 2, 3) | max }}"
                    >{{ cur_list | join('\n') }}</textarea>
                <div>
                    <button type="submit" class="pure-button pure-button-primary">Save</button>
                </div>
            </v-stack>
        </fieldset>
    </form>

    <form method="POST" action="./backup" class="pure-form wait-preact">
        <fieldset>
            <legend>Backup</legend>
            <button type="submit" class="pure-button pure-button-primary">Share database</button>
        </fieldset>
    </form>
</v-stack>

<template id="accountSelector">
    {{ select_group('some', '---', env.account_groups) }}
</template>

<script type="module">
    import {initPreactData, init} from '{{ hash_url('settings.js') }}'
    init({{ joints | tojson}})
    initPreactData({
        FavsForm: {favAccs: {{ fav_ids | tojson }}}
    })
</script>

{% endblock %}
